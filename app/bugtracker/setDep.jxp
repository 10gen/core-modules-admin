<%

if(!request.dep || !request.depOn || !request.type)
   return -1;

var bug = db.bugtracker.cases.findOne({_id: request.dep});
if(!bug.dependency || typeof bug.dependency != "object") {
   bug.dependency = {};
}
bug.dependency[request.depOn] = request.type;
log("bug: "+tojson(bug.dependency));
db.bugtracker.cases.save(bug);

%>
