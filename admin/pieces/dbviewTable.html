<%

var th = obj.th;
var table = obj.table;
var page = obj.page;
var prevPage = obj.prevPage;
var nextPage = obj.nextPage;

%>


<!-- Data Table Begins -->
<table width="100%" border="0">
  <col />
  <forin i th>
    <col id="col$th[i].name" />
  </forin>
  <col />

  <tr class="search-top">
    <td class="left">&nbsp;</td>
    <!-- *COLSPAN MUST EQUAL NUMBER OF CENTER COLUMNS -->
    <td colspan="$table.colspan">

      <!-- Search -->
      <ul>
        <li><select id="searchopt">
          <forin i th>
	    <option value="$th[i].name">$th[i].name</option>
          </forin>
	  </select>
        </li>
        <li><input class="text" id="searchtext" size="40" value="" type="text"></li>
        <li><img src="/~~/admin/assets/img/button_search_on_tan.gif" alt="Search" onclick="doSearch()"></li>
        <li><img src="/~~/admin/assets/img/button_add_on_tan.gif" alt="Add to Search" onclick="addToSearch()"></li>
        <li style="float:right;"><div><img src="/~~/admin/assets/img/button_refresh_on_tan.gif" alt="Refresh" onclick="clearSearch()"></div></li>
      </ul>
    </td>
    <td class="right">&nbsp;</td>
  </tr>

  <!-- White table -->
  <tr class="white-top">
    <!-- Top area -->
    <td class="left"><img src="images/transparent.gif" width="14" height="1"></td>
    <!-- *COLSPAN MUST EQUAL NUMBER OF CENTER COLUMNS -->
    <td class="middle" colspan="$table.colspan">&nbsp;</td>
    <td class="right"><img src="images/transparent.gif" width="14" height="1"></td>
  </tr>


  <!-- Main area -->
  <tr class="white-main">
    <td class="left">&nbsp;</td>
    <forin i th>
      <th>
        <if (top && th[i].name == "NAME")>
          <a onclick="sortBy('name')" class="name">$th[i].name</a>
          <img src="/~~/admin/assets/img/timestamp_circle_1.gif" />
        </if>
        <if (table.idxes[th[i].name])>
          <a onclick="sortBy('$th[i].name')" class="$th[i].className">$th[i].name</a>
          <img src="/~~/admin/assets/img/timestamp_circle_1.gif" />
        </if>
        <if (!(top && th[i].name == "NAME") && !table.idxes[th[i].name])>
          $th[i].name
        </if>
      </th>
    </forin>
    <td class="right">&nbsp;</td>
  </tr>
  <if (table.top)>
    <forin row table.rows>
      <tr class="white-main">
        <td class="left">&nbsp;</td>
        <td><a href="$table.rows[row].url&refPage=$table.currentPage">$table.rows[row].name</a></td>
        <td>$table.rows[row].index
          <if (table.rows[row].index != "")>
	    <br /><input type="image" src="/~~/admin/assets/img/button_drop_on_white.gif" value="Drop" alt="Drop" onclick="dropIndices('$table.rows[row].name')">
          </if>
        </td>
        <td class="center">$table.rows[row].fixed</td>
        <td class="center">
	  <input type="image" src="/~~/admin/assets/img/button_stats_on_white.gif" value="Stats" alt="Stats" onclick="getValidation('$table.rows[row].name')">
        </td>
        <td class="center">
	  <input type="image" src="/~~/admin/assets/img/button_drop_on_white.gif" value="Drop" alt="Drop" onclick="dropTable('$table.rows[row].name')">
        </td>
        <td class="right">&nbsp;</td>
      </tr>
    </forin>
  </if>
  <if (!table.top)>
    <forin row table.rows>
      <tr class="white-main">
        <td class="left">&nbsp;</td>
        <if (table.rows[row].id)>
          <td>$table.rows[row].id</td>
        </if>
        <forin field th>
          <if (th[field].name != "_id") >
            <td >$table.rows[row][th[field].name]</td>
          </if>
        </forin>
        <td class="right">&nbsp;</td>
      </tr>
    </forin>
  </if>

  <tr class="white-bottom">

    <!-- Bottom area -->
    <td class="left">&nbsp;</td>
    <!-- *COLSPAN MUST EQUAL NUMBER OF CENTER COLUMNS -->
    <td class="middle" colspan="$table.colspan">&nbsp;</td>
    <td class="right">&nbsp;</td>
  </tr>
  <!-- Paging -->
  <tr class="paging-bottom">
    <td class="left">&nbsp;</td>
    <!-- *COLSPAN MUST EQUAL NUMBER OF CENTER COLUMNS -->
    <td colspan="$table.colspan">
      <div id="paging">
        <if (1 < page.length)>
	  <ul>
            <if prevPage>
	      <li class="cycle" style="margin-right: 1em; "><a onclick="loadPage('1')">&#60;&#60;</a></li>
	      <li class="cycle" style="margin-right: 1em; "><a onclick="loadPage('$prevPage')">&#60;</a></li>
            </if>
            <forin p page>
              <if (page[p].className == "active" || page[p].className == "modactive") >
                <li class="$page[p].className">$page[p].name</li>
              </if>
              <if (page[p].className != "active" && page[p].className != "modactive") >
                <li class="$page[p].className"><a onclick="loadPage('$page[p].name')">$page[p].name</a></li>
              </if>
            </forin>
            <if nextPage>
	      <li class="cycle" style="margin-left: 1em; "><a onclick="loadPage('$nextPage')">&#62;</a></li>
	      <li class="cycle" style="margin-left: 1em; "><a onclick="loadPage('$table.totalNumPages')">&#62;&#62</a></li>
            </if>
	  </ul>
       </if>
      </div>
    </td>
    <td class="right">&nbsp;</td>
  </tr>
</table>

