<project default="test">
  <target name="test">
    <webtest name="Test user search functionality">
      <config>
        <header name="User-Agent" value="Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0"/>
      </config>
      <invoke url="${site}/admin/users"  username="test@10gen.com" password="test"/>
      <setInputField htmlid="searchtext" value="obohoobobhonautha"/>
      <clickElement xpath="//div[@id='myCollection']/table/tbody//ul//img"/>
      <sleep seconds="1"/>
      <verifyXPath xpath="//div[@id='myCollection']//*[contains(text(),'No users found')]"/>

      <setInputField htmlid="searchtext" value="Test"/>
      <clickElement xpath="//div[@id='myCollection']/table/tbody//ul//img"/>
      <sleep seconds="1"/>
      <verifyXPath text="//div[@id='myCollection']//*[contains(text(),'Test User')]"/>
      <not>
        <verifyXPath xpath="//*[contains(text(), 'Not Admin')]"/>
      </not>
      
      <setInputField htmlid="searchtext" value="Not"/>
      <clickElement xpath="//div[@id='myCollection']/table/tbody//ul//img"/>
      <sleep seconds="1"/>
      <verifyText text="Not Admin"/>
      <!-- Test User still shows up in topCorner -->
      <not>
        <verifyXPath xpath="//div[@id='myCollection']//*[contains(text(),'Test User')]"/>
      </not>

    </webtest>
  </target>
</project>
